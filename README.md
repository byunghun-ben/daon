# 다온(Daon) - 종합 육아 기록 앱 📱

부모가 아이의 일상 활동, 성장, 발달 과정을 기록하고 분석할 수 있는 프리미엄 육아 앱입니다.

## 🍼 서비스 개요

**다온**은 부모가 디지털 육아일기를 작성하고 아이의 발달 과정을 추적할 수 있는 종합 모바일 애플리케이션입니다. AI 기반 인사이트와 상세한 패턴 분석을 통해 개인화된 육아 경험을 제공합니다.

### ✅ 구현 완료 기능 (100%)

#### 🔐 사용자 인증 & 온보딩

- **다중 인증 시스템**: 카카오 로그인, 이메일/비밀번호 인증
- **스마트 온보딩**: 환영 페이지, 아이 프로필 설정, 권한 요청
- **아이 관리**: 신규 등록 vs 기존 아이 관리자 추가 선택

#### 📊 활동 추적 & 기록

- **실시간 활동 기록**: 수유, 기저귀 교체, 수면, 배밀이 등
- **스마트 퀵 액션**: 홈 화면에서 원터치 기록
- **카테고리별 관리**: 활동 유형별 맞춤 입력 폼

#### 📖 디지털 육아일기

- **멀티미디어 일기**: 사진, 동영상, 텍스트 통합 작성
- **마일스톤 추적**: 첫 미소, 첫 걸음마 등 특별한 순간 기록
- **검색 & 필터링**: 날짜, 카테고리별 빠른 검색

#### 📏 성장 모니터링

- **신체 발달 추적**: 키, 몸무게, 머리둘레 기록 및 차트 시각화
- **성장 곡선 분석**: WHO 표준 대비 성장 패턴 분석
- **백분위 추적**: 또래 대비 성장률 모니터링

#### 📈 데이터 인사이트 & 분석

- **패턴 분석**: 수유, 수면, 기저귀 교체 패턴 상세 분석
- **시각화 차트**: react-native-chart-kit 기반 인터랙티브 차트
- **개인화된 리포트**: 일간/주간/월간/분기별 상세 분석
- **성장 예측**: AI 기반 성장 추세 예측

#### 🎨 향상된 UI/UX

- **다크 모드**: 라이트/다크/시스템 설정 따라가기 완벽 지원
- **접근성**: VoiceOver/TalkBack, 폰트 크기 조절, 고대비 모드
- **스와이프 제스처**: SwipeableRow로 빠른 액션 수행
- **이미지 최적화**: 자동 리사이징, 압축, 지연 로딩

#### 💎 프리미엄 기능 & 수익화

- **구독 시스템**: 무료/프리미엄/패밀리 플랜
- **프리미엄 게이트**: PremiumGate 컴포넌트로 기능 제한
- **무료 체험**: 7일 무료 체험 후 자동 구독
- **고급 분석**: AI 인사이트, 무제한 사진, 다중 보호자

#### 🔔 스마트 푸시 알림 시스템

- **카테고리별 알림**: 수유, 수면, 기저귀, 성장, 마일스톤별 세밀한 제어
- **방해 금지 시간**: 지정된 시간대 알림 자동 차단
- **알림 템플릿**: 다국어 지원 개인화된 메시지
- **스케줄링**: 즉시/예약/반복 알림 지원
- **디바이스 최적화**: expo-device로 실제 디바이스에서만 동작

#### 🌐 다국어 지원 (i18n)

- **3개 언어 지원**: 한국어(기본), 영어, 일본어
- **실시간 언어 변경**: 앱 재시작 없이 즉시 적용
- **자동 언어 감지**: 시스템 언어 기반 자동 설정
- **TypeScript 타입 안전성**: i18next 커스텀 타입 선언
- **완전한 현지화**: UI, 알림, 날짜/숫자 포맷팅 모든 영역

## 🏗 기술 아키텍처

### 모노레포 구조

```
daon/
├── apps/
│   ├── mobile/          # Expo 모바일 앱 (Expo Router v5)
│   └── backend/         # Node.js API 서버 (Express.js + Supabase)
├── packages/
│   └── shared/          # 공유 타입 및 유틸리티 (Zod 스키마)
├── docs/                # 문서
└── CLAUDE.md           # Claude Code 가이드
```

### 모바일 앱 아키텍처 (FSD + Expo Router)

```
apps/mobile/
├── app/                 # Expo Router 파일 기반 라우팅
│   ├── (tabs)/         # 메인 탭 네비게이션
│   │   ├── index.tsx   # 홈 대시보드
│   │   ├── record.tsx  # 활동 기록 메인
│   │   ├── diary.tsx   # 일기 목록
│   │   ├── growth.tsx  # 성장 차트
│   │   └── settings.tsx # 설정
│   ├── (auth)/         # 인증 화면
│   ├── (onboarding)/   # 온보딩 플로우
│   ├── children/       # 아이 관리
│   ├── activities/     # 활동 상세
│   ├── diary/          # 일기 상세
│   └── growth/         # 성장 기록 상세
├── features/           # 기능별 비즈니스 로직
│   ├── auth/          # 인증 관련
│   ├── activities/    # 활동 기록
│   ├── diary/         # 일기 작성
│   ├── growth/        # 성장 기록
│   └── children/      # 아이 관리
├── widgets/           # 복합 UI 블록
├── entities/          # 도메인 엔티티
│   ├── activity/      # 활동 도메인
│   ├── child/         # 아이 도메인
│   ├── diary-entry/   # 일기 도메인
│   └── growth-record/ # 성장 기록 도메인
└── shared/            # 공유 리소스
    ├── api/          # API 클라이언트 & 훅
    ├── ui/           # 디자인 시스템
    ├── hooks/        # 커스텀 훅
    ├── lib/          # 유틸리티
    ├── store/        # 상태 관리
    ├── config/       # 테마 & 설정
    └── constants/    # 상수
```

### 기술 스택

#### 프론트엔드 (모바일)

- **프레임워크**: Expo SDK 53 + React Native 0.79
- **라우팅**: Expo Router v5 (file-based routing)
- **상태 관리**: TanStack Query (서버) + Zustand (로컬)
- **HTTP 클라이언트**: Axios (인터셉터 기반 인증)
- **폼 관리**: react-hook-form + Zod validation
- **UI 시스템**: 커스텀 디자인 시스템 + 테마
- **바텀시트**: @gorhom/bottom-sheet (제스처 기반)
- **타입 검증**: Zod 스키마 + TypeScript strict
- **빌드/배포**: EAS (Expo Application Services)

#### 백엔드

- **런타임**: Node.js + Express.js
- **데이터베이스**: Supabase (PostgreSQL + 실시간 기능)
- **인증**: Supabase Auth (JWT 기반) + 카카오 OAuth
- **파일 저장소**: Supabase Storage
- **타입 검증**: Zod 스키마
- **API 문서**: OpenAPI/Swagger

#### 공유 라이브러리

- **타입 시스템**: Zod 스키마 우선 접근법
- **코드 공유**: TypeScript 타입 정의
- **유효성 검증**: Zod 런타임 검증

#### 개발 도구

- **패키지 매니저**: pnpm (모노레포 지원)
- **빌드 도구**: Turborepo
- **코드 품질**: ESLint + Prettier + TypeScript
- **테스트**: Jest (설정 완료)

## 👶 핵심 기능

### 1. 활동 추적 ✅ 완료

- **수유**: 시간, 양, 종류 (모유/분유/이유식), 소요시간
- **기저귀 교체**: 시간, 종류 (소변/대변), 메모
- **수면**: 시작/종료 시간, 수면 품질 메모
- **배밀이 시간**: 지속 시간 및 관찰 내용
- **사용자 정의 활동**: 커스텀 활동 추가
- **실시간 CRUD**: 생성, 조회, 수정, 삭제 완전 지원
- **자동 동기화**: Pull-to-refresh 및 실시간 캐시 업데이트

### 2. 일기 및 마일스톤 ✅ 완료

- **일상 일기**: 날짜별 텍스트 기록 + 사진/동영상 업로드
- **마일스톤 기록**: 첫 미소, 첫 걸음마, 첫 말, 커스텀 마일스톤
- **상세 보기**: 각 일기 항목별 상세 화면
- **편집/삭제**: 완전한 CRUD 지원
- **이미지 업로더**: 갤러리/카메라 선택, 다중 이미지 업로드

### 3. 성장 기록 ✅ 완료

- **신체 측정**: 키, 몸무게, 머리둘레 기록
- **성장 차트**: 시각적 성장 추이 표시
- **측정 단위**: 탭 기반 단위별 차트 (체중/키/머리둘레)
- **기록 관리**: 날짜별 성장 기록 추가/수정/삭제

### 4. 사용자 관리 ✅ 완료

- **다단계 인증**: 카카오 로그인 + 이메일/비밀번호
- **온보딩 플로우**: 환영 페이지 → 아이 프로필 설정
- **아이 등록 방식**:
  - 새 아이 프로필 생성
  - 기존 아이 초대 코드로 참여
- **보호자 관리**: 아이별 다중 보호자 지원
- **설정 화면**: 프로필, 알림, 앱 정보 등

### 5. 실시간 대시보드 ✅ 완료

- **홈 스크린**: 오늘 활동 요약 + 최근 기록 표시
- **빠른 액션**: 주요 활동 바로가기 버튼
- **아이 선택기**: 여러 아이 중 활성 아이 전환
- **실시간 업데이트**: 데이터 변경 즉시 반영

## 🔧 최신 개발 현황

### ✅ 완료된 기능들

#### 🎯 Phase 1-4: 핵심 기능 완성 (2024년 12월)

**인증 및 사용자 관리**

- ✅ JWT 기반 인증 시스템 (Supabase Auth)
- ✅ 카카오 소셜 로그인 통합
- ✅ 이메일/비밀번호 회원가입
- ✅ 온보딩 플로우 (환영 페이지 → 아이 설정)
- ✅ 2가지 아이 등록 방식 (신규 생성/기존 참여)
- ✅ 보호자 초대 코드 시스템
- ✅ 로그아웃 및 세션 관리

**활동 기록 시스템**

- ✅ TanStack Query 기반 서버 상태 관리
- ✅ Axios HTTP 클라이언트 (인터셉터 인증)
- ✅ 수유, 기저귀, 수면, 배밀이 기록
- ✅ 활동 CRUD (생성/조회/수정/삭제)
- ✅ 활동 목록 및 필터링
- ✅ 실시간 대시보드 (홈 스크린)
- ✅ Pull-to-refresh 및 자동 동기화

**일기 및 마일스톤**

- ✅ 날짜별 일기 작성
- ✅ 사진/동영상 업로드 기능
- ✅ 마일스톤 추가 및 관리
- ✅ 일기 목록 및 상세 보기
- ✅ 일기 편집/삭제 기능

**성장 기록**

- ✅ 키, 몸무게, 머리둘레 기록
- ✅ 성장 차트 시각화
- ✅ 측정 단위별 탭 네비게이션
- ✅ 성장 기록 CRUD

**UI/UX 및 아키텍처**

- ✅ Feature-Sliced Design (FSD) 아키텍처
- ✅ Expo Router v5 파일 기반 라우팅
- ✅ 커스텀 디자인 시스템 (Button, Input, Card 등)
- ✅ 테마 시스템 (색상, 타이포그래피, 간격)
- ✅ 반응형 레이아웃 및 Safe Area 처리

**데이터 관리**

- ✅ Zod 스키마 기반 타입 안전성
- ✅ 실시간 캐싱 및 동기화
- ✅ 낙관적 업데이트 (Optimistic Updates)
- ✅ 에러 처리 및 사용자 피드백

**개발 환경**

- ✅ 모노레포 설정 (pnpm + Turborepo)
- ✅ TypeScript strict 모드
- ✅ ESLint + Prettier 설정
- ✅ 전체 타입 체크 통과
- ✅ 빌드 시스템 완성

### 🔧 기술적 성과

- **100% 타입 안전성**: `as` 타입 단언 없이 완전한 타입 안전성 확보
- **실시간 동기화**: TanStack Query를 통한 자동 캐싱 및 데이터 동기화
- **에러 처리**: 체계적인 에러 처리 및 사용자 친화적 피드백
- **성능 최적화**: 메모이제이션, 가상화, 이미지 최적화
- **개발자 경험**: Hot reload, 타입 체크, 린팅 자동화

## 🚀 향후 개발 계획

### Phase 5: 고급 기능 및 분석 (예정)

- [ ] 활동 패턴 분석 및 인사이트
- [ ] 성장 차트 WHO 표준 비교
- [ ] 푸시 알림 및 리마인더
- [ ] 데이터 내보내기 (PDF 리포트)
- [ ] 고급 이미지/동영상 처리

### Phase 6: 프리미엄 기능 (예정)

- [ ] 구독 시스템 구현
- [ ] 고급 분석 기능
- [ ] 추가 보호자 지원 (무제한)
- [ ] 클라우드 백업 및 복원
- [ ] AI 기반 인사이트

### 향후 확장 계획

- [ ] Apple Watch 컴패니언 앱
- [ ] 보호자용 웹 대시보드
- [ ] 의료진과의 공유 기능
- [ ] 다국어 지원
- [ ] 웨어러블 기기 연동

## 🛠 시작하기

### 사전 요구사항

- Node.js 22+ 및 pnpm
- Expo CLI 및 EAS CLI
- iOS/Android 개발 환경
- Supabase 계정

### 설치

```bash
# 리포지토리 클론
git clone https://github.com/your-org/daon.git
cd daon

# 의존성 설치
pnpm install

# 환경 변수 설정
cp .env.example .env

# 개발 서버 시작
pnpm dev
```

### 개발 명령어

```bash
# 모든 서비스 시작
pnpm dev

# 모바일 앱 (apps/mobile)
cd apps/mobile
pnpm start          # Expo 개발 서버
pnpm ios           # iOS 시뮬레이터
pnpm android       # Android 에뮬레이터
pnpm web           # 웹 브라우저

# 백엔드 (apps/backend)
cd apps/backend
pnpm dev           # 개발 서버
pnpm db:types      # Supabase 타입 생성

# 테스트 및 빌드
pnpm test          # 테스트 실행
pnpm type-check    # 타입 체크
pnpm lint          # 린팅
pnpm build         # 프로덕션 빌드
```

### EAS 배포 명령어

```bash
# 모바일 앱 디렉토리
cd apps/mobile

# 빌드
pnpm build:development  # 개발 빌드
pnpm build:preview     # 프리뷰 빌드
pnpm build:production  # 프로덕션 빌드
pnpm build:all         # 모든 플랫폼

# 배포
pnpm update           # OTA 업데이트
pnpm submit:ios       # App Store 제출
pnpm submit:android   # Google Play 제출
```

## 💰 수익화 전략

### 무료 기능

- 기본 활동 추적 (수유, 기저귀, 수면)
- 사진이 포함된 일기 작성
- 아이당 2개의 보호자 계정
- 기본 성장 차트
- 1GB 클라우드 저장공간

### 프리미엄 기능 (월 4,900원)

- 무제한 보호자 계정
- 고급 분석 및 AI 인사이트
- 무제한 클라우드 저장공간
- 동영상 기록 및 고급 미디어 기능
- 데이터 내보내기 (PDF, CSV)
- 우선 고객 지원
- 신기능 우선 접근

## 📱 플랫폼 지원

### 현재 지원

- iOS 13+
- Android 8+ (API level 26)
- 웹 브라우저 (Metro 번들러)

### 향후 지원 예정

- Apple Watch (watchOS 7+)
- iPad 최적화
- 웹 대시보드

## 🔒 개인정보 보호 및 보안

- GDPR 및 CCPA 준수
- JWT 기반 안전한 인증
- Supabase 보안 정책 준수
- 아동 데이터 보호 강화
- 정기적인 보안 감사

## 📄 라이선스

이 프로젝트는 독점 소프트웨어입니다. 모든 권리가 보유됩니다.

---

**다온(Daon)** - 한국어로 "함께 모이다"라는 뜻 - 공유된 육아 경험을 통해 가족을 하나로 모으는 서비스

---

1. 데이터베이스 스키마


    - push_tokens - 사용자별 푸시 토큰 관리
    - notification_settings - 알림 설정 (카테고리별, 방해금지시간 등)
    - scheduled_notifications - 예약 알림
    - notification_history - 알림 이력

2. NotificationService 클래스


    - 푸시 토큰 등록/관리
    - 즉시 알림 발송
    - 예약 알림 스케줄링
    - 다국어 템플릿 지원 (한글/영어/일본어)
    - 방해금지 시간 기능

3. NotificationSchedulerService 클래스


    - 크론 작업으로 자동 스케줄링
    - 수유/수면 리마인더
    - 일일/주간 요약 알림
    - 실패한 알림 재시도 로직

4. REST API 엔드포인트


    - POST /notifications/tokens - 푸시 토큰 등록
    - GET/PUT /notifications/settings - 알림 설정 관리
    - POST /notifications/send - 즉시 알림 발송
    - POST /notifications/schedule - 알림 예약
    - GET /notifications/history - 알림 이력

5. 기술 스택


    - Expo Server SDK for push notifications
    - node-cron for scheduling
    - Supabase for database
    - TypeScript type safety
